<!DOCTYPE html>
<html lang="de">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>FitTime - Shop</title>
    <link rel="icon" href="images/favicon.PNG" type="image/png">
    <link rel="stylesheet" href="css/style.css"> 
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0-beta3/css/all.min.css"> 
    <script src="https://ajax.googleapis.com/ajax/libs/jquery/3.4.1/jquery.min.js"></script>
    <script src="js/shop.js"></script>
</head>
<body>
    <!-- Header -->
    <div class="header">
        <h1>FitTime</h1>
    </div>

    <!-- Navigation -->
    <div class="navbar">
        <a href="index.html">Home</a>
        <a href="über_Uns.html">Über Uns</a>
        <a href="shop.html" class="button">Shop</a>
        <a href="kontakt.html">Kontakt</a>
        <a href="profilseite.html">Profil</a>
        <a href="warenkorb.html" class="cart-icon">
            <i class="fas fa-shopping-cart"></i> 
            <span id="cart-total">0,00€</span>
        </a>
    </div>

    <!-- Filter und Suche -->
    <div class="filter-search">
        <div class="price-filter">
            <label for="price-range">Preis:</label>
            <input type="range" id="price-range" min="0" max="100" value="100">
            <span id="price-range-value">0-100€</span> <!-- Dynamic range will be updated -->
        </div>
        <div class="search-bar">
            <input type="text" id="search-bar" placeholder="Suche">
            <button id="search-button"><i class="fas fa-search"></i></button>
        </div>
    </div>

    <!-- Shop-Bereich -->
    <div class="shop-container">
        <div class="product-grid" id="product-grid">
            <!-- Dynamically loaded products will appear here -->
        </div>
    </div>

    <!-- Footer -->
    <div class="footer">
        <a href="impressum.html">Impressum</a>
        <a href="datenschutz.html">Datenschutz</a>
        <a href="agb.html">AGB</a>
    </div>

    <script>
        $(document).ready(function() {
            console.log('loading all products');
            $.ajax({
                url: 'http://localhost:8000/api/products',
                method: 'GET',
                contentType: 'application/json; charset=utf-8',
                cache: false,
                dataType: 'json'
            })
            .done(function(response) {
                console.log(response);
                const productGrid = $('#product-grid');
                productGrid.empty();
                response.forEach(product => {
                    productGrid.append(`
                        <div class="product-card">
                            <img src="${product.image_url}" alt="${product.name}">
                            <h3>${product.name}</h3>
                            <p>${product.description}</p>
                            <p>${product.price.toFixed(2)}€</p>
                            <button onclick="addToCart(${product.id})">In den Warenkorb</button>
                        </div>
                    `);
                });
            })
            .fail(function(jqXHR, statusText, error) {
                console.log('Response Code: ' + jqXHR.status + ' - Fehlermeldung: ' + jqXHR.responseText);
                alert('Ein Fehler ist aufgetreten');
            });
        });
    
        function addToCart(productId) {
            alert(`Produkt mit ID ${productId} wurde in den Warenkorb gelegt.`);
        }
    </script>
    
    
</body>
</html>
